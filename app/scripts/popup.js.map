{"version":3,"sources":["../scripts.babel/popup.js"],"names":[],"mappings":"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","file":"popup.js","sourcesContent":["'use strict';\n\n//Declare the code variable\nvar code;\n\n// Restores the chrome extension code\n// stored in chrome.storage.\n//Also bind our clicks and things\nfunction init() {\n\n  // Use default value of nothing\n  chrome.storage.sync.get({\n    extensionCode: ''\n  }, function(items) {\n\n    //In this call back, set the code to the retrieved value\n    code = items.extensionCode;\n\n    //if we have a code show the stuff\n    if(code.length > 0)\n    {\n        document.getElementById(\"sorry\").className = \"hide\";\n\n        //bind our button clicks\n        document.getElementById('saveTab').addEventListener('click', saveTab);\n        document.getElementById('saveAllTabs').addEventListener('click', saveAllTabs);\n    }\n    //if not, tell them to\n    else document.getElementById(\"buttons\").className = \"hide\";\n\n  });\n\n}\n\n//Error function\nfunction Response(res, successMsg) {\n\n   var message = \"\";\n\n   //Session is invalid!\n   if (res == 401) message = \"Your Extension code is invalid, please visit the 'My Account' Page on linkDrops\";\n   else if(res < 200 || res > 299) message = \"Error \" + res + \"! Could not connect to linkDrops\";\n   else message = successMsg;\n\n   // Update status to let user know options were saved.\n   // Timeout the div after it is displayed\n   var status = document.getElementById('status');\n   status.textContent = message;\n   setTimeout(function() {\n     status.textContent = '';\n }, 3000);\n};\n\n//Save the current tab\nfunction saveTab() {\n\n    //Get the current tab url\n    chrome.tabs.query(\n        {active: true, currentWindow: true},\n        function (tab) {\n        //Callback, create the payload\n        let payload = {\n            \"token\": code,\n            \"content\": tab[0].url\n        };\n\n        // construct an HTTP request\n        let xhttp = new XMLHttpRequest();\n        xhttp.open(\"POST\", \"http://srv.kondeo.com/dumps\", true);\n\n        //Set the post type\n        xhttp.setRequestHeader('Content-Type', 'application/json');\n\n        //Check for responses\n        xhttp.onreadystatechange = function() {\n            //Send the status to the response function\n            Response(xhttp.status, \"Dropped!\");\n        }\n\n        //Send the json\n        xhttp.send(JSON.stringify(payload));\n    });\n}\n\n//Save all of the tabs\nfunction saveAllTabs() {\n\n    //Get the current tab url\n    chrome.tabs.query(\n        {currentWindow: true},\n    function (tabs) {\n\n        //Loop through every tab\n        for(let tab in tabs)\n        {\n            //Callback, create the payload\n            let payload = {\n                \"token\": code,\n                \"content\": tab.url\n            };\n\n            // construct an HTTP request\n            let xhttp = new XMLHttpRequest();\n            xhttp.open(\"POST\", \"http://srv.kondeo.com:3000/dumps\", true);\n\n            //Set the post type\n            xhttp.setRequestHeader('Content-Type', 'application/json');\n\n            //check for responses\n            xhttp.onreadystatechange = function() {\n                //Send the status to the response function\n                Response(xhttp.status, \"Dropped!\");\n            }\n\n            //Send the json\n            xhttp.send(JSON.stringify(payload));\n        }\n    });\n}\n\n// Initialize on page load\ndocument.addEventListener('DOMContentLoaded', init);\n"]}